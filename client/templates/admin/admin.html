<template name="admin">
	<div class="admin">
		<div class="row">
			<div class="col-md-8 col-md-offset-2">
				<h1>Admin</h1>
				<span class="login-buttons"> {{> loginButtons}} </span>
			</div>
		</div>

		{{#if currentUser}}
		<div class="row settings">
			<div class="col-md-8 col-md-offset-2">
					{{#autoForm collection="Settings" doc=settings id="updateSettingsForm" type="update" resetOnSuccess="false"}}

						<!-- Nav tabs -->
						<ul class="nav nav-tabs" role="tablist">
							<li class="nav-item">
								<a class="nav-link active" href="#generalSettings" role="tab" data-toggle="tab">General</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#couchpotatoSettings" role="tab" data-toggle="tab">CouchPotato</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#sickrageSettings" role="tab" data-toggle="tab">SickRage</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#sonarrSettings" role="tab" data-toggle="tab">Sonarr</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#notificationSettings" role="tab" data-toggle="tab">Alerts</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#settings" role="tab" data-toggle="tab">About</a>
							</li>
						</ul>

						<!-- Tab panes -->
						<div class="tab-content">
							<div role="tabpanel" class="tab-pane active" id="generalSettings">
								<div class="setting-tab">
									{{> afQuickField name='searchOptionsMOVIES'}}
									{{> afQuickField name='searchOptionsTV'}}
									<p class="text-muted">
										Choose the type of content that can be requested
									</p>
									<br>
									{{> afQuickField name='approval'}}
									<p class="text-muted">
										Choose whether you would like to approve all requests
									</p>
									<br>
									{{> afQuickField name='weeklyLimit' style="width:auto;"}}
									<p class="text-muted">
										Set a weekly request limit for your users. Hint: 0 means no limit
									</p>
									<br>
									{{> afQuickField name='plexAuthenticationENABLED'}}
									{{> afQuickField name='plexAuthenticationTOKEN' style="width:auto;"}}

									<form class="form-inline" id="tokenForm">
									  <div class="form-group">
									    <label class="sr-only" for="exampleInputEmail3">Plex Username</label>
									    <input type="email" class="form-control" id="exampleInputEmail3" placeholder="Plex Username">
									  </div>
									  <div class="form-group">
									    <label class="sr-only" for="exampleInputPassword3">Password</label>
									    <input type="password" class="form-control" id="exampleInputPassword3" placeholder="Password">
									  </div>
									  <button type="submit" class="btn btn-secondary-outline"><i class="fa fa-key"></i> Get token</button>
									</form>

									<p class="text-muted">
										Allow only users you've shared your library with to request content. Follow these
										<a href="https://support.plex.tv/hc/en-us/articles/204059436-Finding-your-account-token-X-Plex-Token" target="_blank">instructions</a>
										to retrieve your token. Alternatively use the form above to sign into Plex.tv and we'll get it for you.
									</p>

								</div>
							</div>
							<div role="tabpanel" class="tab-pane" id="couchpotatoSettings">
								{{> afQuickField name='couchPotatoENABLED'}}
								{{> afQuickField name='couchPotatoURL'}}
								{{> afQuickField name='couchPotatoPORT'}}
								{{> afQuickField name='couchPotatoAPI'}}
								{{> afQuickField name='couchPotatoSSL'}}
							</div>
							<div role="tabpanel" class="tab-pane" id="sickrageSettings">
								{{> afQuickField name='sickRageENABLED'}}
								{{> afQuickField name='sickRageURL'}}
								{{> afQuickField name='sickRagePORT'}}
								{{> afQuickField name='sickRageAPI'}}
								{{> afQuickField name='sickRageSSL'}}
							</div>
							<div role="tabpanel" class="tab-pane" id="sonarrSettings">
								{{> afQuickField name='sonarrENABLED'}}
								{{> afQuickField name='sonarrURL'}}
								{{> afQuickField name='sonarrPORT'}}
								{{> afQuickField name='sonarrAPI'}}
								{{> afQuickField name='sonarrSSL'}}
								{{> afQuickField name='sonarrQUALITYPROFILEID'}}
								{{> afQuickField name='sonarrROOTFOLDERPATH'}}
								{{> afQuickField name='sonarrSEASONFOLDERS'}}
							</div>
							<div role="tabpanel" class="tab-pane" id="notificationSettings">
								{{> afQuickField name='pushbulletENABLED'}}
								{{> afQuickField name='pushbulletAPI'}}
								{{> afQuickField name='pushoverENABLED'}}
								{{> afQuickField name='pushoverAPI'}}
							</div>
							<div role="tabpanel" class="tab-pane" id="notificationSettings">
								<p>About Page</p>
							</div>
						</div>
						<button type="submit" class="btn btn-primary-outline btn-block">Update Settings</button>
					{{/autoForm}}
				</div>
			</div>
		{{/if}}
	</div>
</template>
